!function(){var e=void 0,t=void 0;!function e(n,r,i){function o(s,u){if(!r[s]){if(!n[s]){var c="function"==typeof t&&t;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var d=r[s]={exports:{}};n[s][0].call(d.exports,function(e){var t=n[s][1][e];return o(t?t:e)},d,d.exports,e,n,r,i)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function r(){var e=s(),t=u(),n=a(e+t.toString()),r=n.substr(0,4),o=n.substr(4);e=e.substr(0,19)+r+"-"+o;var c=i(),f=a(t.origin),d=[h.USERREPORT,c,f].join("."),g=a(e+d+p);return[l,g,e,d].join(".")}function i(){var e=(new Date).getTime()-new Date(2019,0,1).getTime(),t=Math.floor(e/864e5);return t}function o(){return Math.round((new Date).getTime()/1e3)}var a=e("./hash"),s=e("./uuid"),u=e("./location"),c="apr_dsu",f=c+"_ttl",d=31536e3,l="1",p="YicAu6ZpNG",h={USERREPORT:"1"};t.exports={generateDsu:r,getDsuNow:i,getDsuAge:function(){try{var e=window.localStorage.getItem(c),t=e.split("."),n=t[t.length-2];return+n}catch(e){return i()}},readOrCreateDsu:function(e){var t,n;try{t=window.localStorage.getItem(c),n=window.localStorage.getItem(f)}catch(e){return null}(!t||e&&n&&n<o())&&(t=r());try{window.localStorage.setItem(c,t),e&&window.localStorage.setItem(f,o()+d),t=window.localStorage.getItem(c)}catch(e){return null}return t}}},{"./hash":2,"./location":3,"./uuid":4}],2:[function(e,t,n){"use strict";var r=e("siphash"),i=[2251905623,1801168887,1769155591,711914637];t.exports=r.hash_hex.bind(null,i)},{siphash:15}],3:[function(e,t,n){"use strict";function r(e){var t=0!==e.indexOf("/")&&e.indexOf("/")!==-1&&(e.indexOf(":")===-1||e.indexOf(":")>e.indexOf("/")),n=o.exec(t?"noscheme://"+e:e),r={scheme:t?"":n[2]||"",host:n[4]||"",hostname:n[4]?n[4].split(":")[0]:"",pathname:n[5]||"",search:n[7]||"",hash:n[9]||"",toString:function(){return e}};return r.origin=r.scheme+"://"+r.host,r}function i(){var e=a||window.location.toString();if(e=e.replace(/\.demo\.audienceproject\.com\//,"/"),s.url===e)return s.parsed;var t=r(e);return s.url=e,s.parsed=t,t}var o=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),a=null,s={};t.exports=i,t.exports.onLocationChange=function(e){var t=i().pathname,n=setInterval(function(){var n=i().pathname;n!==t&&(t=n,e(n))},100);return function(){clearInterval(n)}},t.exports.updateLocation=function(e){r(e),a=e},t.exports.parse=r},{}],4:[function(e,t,n){"use strict";function r(){var e=new Uint32Array(4);crypto.getRandomValues(e);var t=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){t++;var r=e[t>>3]>>t%8*4&15,i="x"===n?r:3&r|8;return i.toString(16)})}function i(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}var o="function"==typeof Uint32Array&&"undefined"!=typeof crypto&&"undefined"!=typeof crypto.getRandomValues,a=o?r:i;t.exports=a},{}],5:[function(e,t,n){"use strict";var r=e("promise-polyfill");r.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},t.exports=r},{"promise-polyfill":12}],6:[function(e,t,n){"use strict";t.exports=function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);for(var t,n,r=e.length,i=e.slice();r;)t=Math.floor(Math.random()*r--),n=i[r],i[r]=i[t],i[t]=n;return i}},{}],7:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,s,u=e.length;a=r(e),s=new d(3*u/4-a),i=a>0?u-4:u;var c=0;for(t=0,n=0;t<i;t+=4,n+=3)o=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===a?(o=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===a&&(o=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i="",o=[],a=16383,u=0,f=n-r;u<f;u+=a)o.push(s(e,u,u+a>f?f:u+a));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=u;for(var c=[],f=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=l.length;p<h;++p)c[p]=l[p],f[l.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],8:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?d(e,t,n):h(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function f(e,t){if(u(t),e=o(e,t<0?0:0|g(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function l(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=l(e,t),e}function h(e,t){if(a.isBuffer(t)){var n=0|g(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?o(e,0):l(e,t);if("Buffer"===t.type&&$(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),a.alloc(+e)}function y(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return Q(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:I(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):I(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===u)return f*a}else f!==-1&&(c-=c-f),f=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var d=!0,l=0;l<u;l++)if(o(e,c+l)!==o(t,l)){d=!1;break}if(d)return c}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return X(Q(t,e.length-n),e,n,r)}function S(e,t,n,r){return X(J(t),e,n,r)}function x(e,t,n,r){return S(e,t,n,r)}function k(e,t,n,r){return X(G(t),e,n,r)}function C(e,t,n,r){return X(W(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?H.fromByteArray(e):H.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,f,d;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(d=(31&o)<<6|63&u,d>127&&(a=d));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(d=(15&o)<<12|(63&u)<<6|63&c,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(d=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,d>65535&&d<1114112&&(a=d))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return P(r)}function P(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Y(e[o]);return i}function U(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(e,t,n,r,52,8),n+8}function N(e){if(e=z(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return e<16?"0"+e.toString(16):e.toString(16)}function Q(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function J(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function G(e){return H.toByteArray(N(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e){return e!==e}var H=e("base64-js"),Z=e("ieee754"),$=e("isarray");n.Buffer=a,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),n.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return c(null,e,t,n)},a.allocUnsafe=function(e){return f(null,e)},a.allocUnsafeSlow=function(e){return f(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=y,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):v.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,u=Math.min(o,s),c=this.slice(r,i),f=e.slice(t,n),d=0;d<u;++d)if(c[d]!==f[d]){o=c[d],s=f[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),Z.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),Z.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),Z.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),Z.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;q(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;q(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);q(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);q(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:Q(new a(e,r).toString()),u=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":7,ieee754:9,isarray:10}],9:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,d=n?i-1:0,l=n?-1:1,p=e[t+d];for(d+=l,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+d],d+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+e[t+d],d+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,d=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+d>=1?l/u:l*Math.pow(2,1-d),t*u>=2&&(a++,u/=2),a+d>=f?(s=0,a=f):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*g}},{}],10:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],11:[function(e,t,n){(function(e){function t(t){return t&&e.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:e.XMLHttpRequest?new XMLHttpRequest:void 0}function r(e,t,n){e[t]=e[t]||n}var i=["responseType","withCredentials","timeout","onprogress"];n.ajax=function(n,o){function a(e,t){return function(){f||(o(void 0===d.status?e:d.status,0===d.status?"Error":d.response||d.responseText||t,d),f=!0)}}var s=n.headers||{},u=n.body,c=n.method||(u?"POST":"GET"),f=!1,d=t(n.cors);d.open(c,n.url,!0);var l=d.onload=a(200);d.onreadystatechange=function(){4===d.readyState&&l()},d.onerror=a(null,"Error"),d.ontimeout=a(null,"Timeout"),d.onabort=a(null,"Abort"),u&&(r(s,"X-Requested-With","XMLHttpRequest"),e.FormData&&u instanceof e.FormData||r(s,"Content-Type","application/x-www-form-urlencoded"));for(var p,h=0,g=i.length;h<g;h++)p=i[h],void 0!==n[p]&&(d[p]=n[p]);for(var p in s)d.setRequestHeader(p,s[p]);return d.send(u),d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){!function(e){function n(){}function r(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function o(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void l(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:s)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}a(t.promise,r)}))}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void f(r(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&l(function(){e._handled||p(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}var d=setTimeout,l="function"==typeof setImmediate&&setImmediate||function(e){d(e,0)},p=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new c(e,t,r)),r},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}t[o]=a,0===--i&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},i._setImmediateFn=function(e){l=e},i._setUnhandledRejectionFn=function(e){p=e},"undefined"!=typeof t&&t.exports?t.exports=i:e.Promise||(e.Promise=i)}(this)},{}],13:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;f<c;++f){var d,l,p,h,g=e[f].replace(s,"%20"),m=g.indexOf(n);m>=0?(d=g.substr(0,m),l=g.substr(m+1)):(d=g,l=""),p=decodeURIComponent(d),h=decodeURIComponent(l),r(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],14:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],15:[function(e,t,n){n=t.exports=e("./lib/siphash")},{"./lib/siphash":16}],16:[function(e,t,n){var r=function(){"use strict";function e(e,t){var n=e.l+t.l,r={h:e.h+t.h+(n/2>>>31)>>>0,l:n>>>0};e.h=r.h,e.l=r.l}function t(e,t){e.h^=t.h,e.h>>>=0,e.l^=t.l,e.l>>>=0}function n(e,t){var n={h:e.h<<t|e.l>>>32-t,l:e.l<<t|e.h>>>32-t};e.h=n.h,e.l=n.l}function r(e){var t=e.l;e.l=e.h,e.h=t}function i(i,o,a,s){e(i,o),e(a,s),n(o,13),n(s,16),t(o,i),t(s,a),r(i),e(a,o),e(i,s),n(o,17),n(s,21),t(o,a),t(s,i),r(a)}function o(e,t){return e.charCodeAt(t+3)<<24|e.charCodeAt(t+2)<<16|e.charCodeAt(t+1)<<8|e.charCodeAt(t)}function a(e,n){var r,a={h:e[1]>>>0,l:e[0]>>>0},s={h:e[3]>>>0,l:e[2]>>>0},u={h:a.h,l:a.l},c=a,f={h:s.h,l:s.l},d=s,l=0,p=n.length,h=p-7,g=new Uint8Array(new ArrayBuffer(8));for(t(u,{h:1936682341,l:1886610805}),t(f,{h:1685025377,
l:1852075885}),t(c,{h:1819895653,l:1852142177}),t(d,{h:1952801890,l:2037671283});l<h;)r={h:o(n,l+4),l:o(n,l)},t(d,r),i(u,f,c,d),i(u,f,c,d),t(u,r),l+=8;g[7]=p;for(var m=0;l<p;)g[m++]=n.charCodeAt(l++);for(;m<7;)g[m++]=0;r={h:g[7]<<24|g[6]<<16|g[5]<<8|g[4],l:g[3]<<24|g[2]<<16|g[1]<<8|g[0]},t(d,r),i(u,f,c,d),i(u,f,c,d),t(u,r),t(c,{h:0,l:255}),i(u,f,c,d),i(u,f,c,d),i(u,f,c,d),i(u,f,c,d);var y=u;return t(y,f),t(y,c),t(y,d),y}function s(e){return[o(e,0),o(e,4),o(e,8),o(e,12)]}function u(e,t){var n=a(e,t);return("0000000"+n.h.toString(16)).substr(-8)+("0000000"+n.l.toString(16)).substr(-8)}function c(e,t){var n=a(e,t);return 4294967296*(2097151&n.h)+n.l}return{string16_to_key:s,hash:a,hash_hex:u,hash_uint:c}}(),t=t||{};t.exports=r},{}],17:[function(t,n,r){(function(t){"use strict";!function(t,r){"function"==typeof e&&e.amd?e([],r):"object"==typeof n&&n.exports?n.exports=r():t.TCStringParse=r()}("undefined"==typeof self?this:self,function(){var e=function(e){for(var t="",n=0,r=e.length;n<r;n+=1){var i=e.charCodeAt(n).toString(2),o="00000000".slice(0,8-i.length);t+=o+i}return t},n=function(e){if("function"==typeof atob){var n=e.replace(/_/g,"/").replace(/-/g,"+");try{return atob(n)}catch(e){throw new Error("Unable to decode transparency and consent string")}}if("function"==typeof t)return t.from(e,"base64").toString("binary");throw new Error("Unable to detect base64 decoder")},r=function(e){return parseInt(e,2)||0},i=function(e){return 100*r(e)},o=function(e){for(var t="A".charCodeAt(),n=e.match(/.{6}/g)||[],i="",o=0,a=n.length;o<a;o+=1){var s=r(n[o])+t;i+=String.fromCharCode(s)}return i},a=function(e){return Boolean(Number(e))},s=function(e){for(var t=e.split(""),n={},r=0,i=t.length;r<i;r+=1)a(t[r])&&(n[r+1]=!0);return n},u=function(t){if("string"!=typeof t)throw new Error("Invalid transparency and consent string specified");for(var i=t.split("."),o=[],a=0,s=i.length;a<s;a+=1)o.push(e(n(i[a])));var u=r(o[0].slice(0,6));if(2!==u)throw new Error("Unsupported transparency and consent string version “"+u+"”");return o},c=function(e){for(var t=[{key:"purposeConsents",size:24,decoder:s},{key:"purposeLegitimateInterests",size:24,decoder:s}],n=[{key:"maxVendorId",size:16},{key:"isRangeEncoding",size:1,decoder:a}],u=[{key:"version",size:6},{key:"created",size:36,decoder:i},{key:"lastUpdated",size:36,decoder:i},{key:"cmpId",size:12},{key:"cmpVersion",size:12},{key:"consentScreen",size:6},{key:"consentLanguage",size:12,decoder:o},{key:"vendorListVersion",size:12},{key:"policyVersion",size:6},{key:"isServiceSpecified",size:1,decoder:a},{key:"useNonStandardStacks",size:1,decoder:a},{key:"specialFeatureOptins",size:12,decoder:s}].concat(t).concat({key:"purposeOneTreatment",size:1,decoder:a},{key:"publisherCountryCode",size:12,decoder:o},{key:"vendorConsents",queue:[{key:"maxVendorId",size:16},{key:"isRangeEncoding",size:1,decoder:a}]},{key:"vendorLegitimateInterests",queue:n},{key:"publisherRestrictions",queue:[{key:"numPubRestrictions",size:12}]}),c=[{size:3}],f=[].concat(c).concat(n),d=[].concat(c).concat(n),l=[].concat(c).concat(t).concat({key:"numCustomPurposes",size:6}),p=[{key:"core",queue:u}],h=1;h<e.length;h+=1){var g=e[h],m=r(g.slice(0,3));1===m?p.push({key:"disclosedVendors",queue:f}):2===m?p.push({key:"allowedVendors",queue:d}):3===m&&p.push({key:"publisherTC",queue:l})}return p};return function(e){var t=function(e,t,n,r){var i=function(){if(r.pubRestrictionEntry&&r.rangeEntry)for(var t in r.rangeEntry)Object.prototype.hasOwnProperty.call(r.rangeEntry,t)&&(r.pubRestrictionEntry[t]=(r.pubRestrictionEntry[t]||[]).concat(r.rangeEntry[t]));r.numPubRestrictions&&(r.numPubRestrictions-=1,e.push({key:"purposeId",size:6},{key:"restrictionType",size:2},{key:"numEntries",size:12}))},o=function(){r.numEntries?(r.numEntries-=1,e.push({key:"isRange",size:1,decoder:a},{key:"startVendorId",size:16})):i()},u=function(){return!r.purposeId||[{purpose:r.purposeId,isAllowed:0!==r.restrictionType,isConsentRequired:1===r.restrictionType,isLegitimateInterestRequired:2===r.restrictionType}]};if("isRangeEncoding"===t.key)e.push(n?{key:"numEntries",size:12}:{key:"bitField",size:r.maxVendorId,decoder:s});else if("numEntries"===t.key)r.rangeEntry={},o();else if("isRange"===t.key)n&&e.push({key:"endVendorId",size:16});else if("startVendorId"===t.key)r.isRange||(r.rangeEntry[n]=u(),o());else if("endVendorId"===t.key){for(var c=r.startVendorId;c<=r.endVendorId;c+=1)r.rangeEntry[c]=u();o()}else"numCustomPurposes"===t.key?e.push({key:"customPurposeConsents",size:r.numCustomPurposes,decoder:s},{key:"customPurposeLegitimateInterests",size:r.numCustomPurposes,decoder:s}):"numPubRestrictions"===t.key&&(r.pubRestrictionEntry={},i())},n=function(e){return e.pubRestrictionEntry||e.rangeEntry||e.bitField||e},i=0,o=function(e,t){var n=t.slice(i,i+e.size);return i+=e.size,(e.decoder||r)(n)},f=function(e,r){if(!e.queue)return o(e,r);for(var i={},a=0;a<e.queue.length;a+=1){var s=e.queue[a],u=o(s,r);s.key&&(i[s.key]=u),t(e.queue,s,u,i)}return n(i)},d=function(e,r){for(var i={},o=0;o<e.queue.length;o+=1){var a=e.queue[o],s=f(a,r);a.key&&(i[a.key]=s),t(e.queue,a,s,i)}return n(i)},l=function(){for(var t=u(e),n=c(t),r={},o=0;o<n.length;o+=1){var a=n[o],s=t[o],f=d(a,s);a.key&&(r[a.key]=f),i=0}return r};return l()}})}).call(this,t("buffer").Buffer)},{buffer:8}],18:[function(e,t,n){"use strict;";t.exports=Object.assign||function(){for(var e,t,n=Object.prototype.hasOwnProperty,r={},i=0,o=arguments.length;i<o;++i){t=arguments[i];for(e in t)n.call(t,e)&&(r[e]=t[e])}return r}},{}],19:[function(e,t,n){!function(e){e=e||"apr";var t=window.__APRSAK||function(e){t._cmds.push({k:String(e),a:Array.prototype.slice.call(arguments,1),t:Date.now()});for(var n=0,r=t._subs.length;n<r;n++)t._subs[n]()};t._cmds=t._cmds||[],t._subs=t._subs||[],window.__APRSAK=t,window.hasOwnProperty(e)===!1&&(window[e]=t)}()},{}],20:[function(e,t,n){"use strict";t.exports={}},{}],21:[function(e,t,n){"use strict";function r(t){var n=t.config.ads,r=t.ads,i=n.domains.some(function(n){if("string"==typeof n)return s(n);if("object"==typeof n){var r=Object.keys(n);return r.some(function(r){if(t.sakConfig.plugins.indexOf(r)===-1)return!1;var i=e("plugin:"+r);return i.checkAdsDomain(t,n[r])})}return!1});if(i===!1)throw new Error("Domain isn't not in whitelist");var o="/uid"===n.client.slice(-4)?n.client.slice(0,-4):n.client,a=n.packages.concat(["x"]);return r.hasOwnProperty("request")===!1&&(r.request=u(o,a).then(function(e){return f.set(n,e),r.hasOwnProperty("segments")===!1&&(r.segments=e),r.segments})),r.request}function i(e,t){var n=e.config.ads,i=e.ads,s=n.mapping,u=Object.keys(s);if(c.isActive()){for(var d=[],l=0;l<u.length;l++){var p=s[u[l]].map(String);d.push.apply(d,p)}var h=c.choose(d),g=o({},n,{fake:!0});return f.set(g,h),i.segments=h,a.resolve(i.segments)}return t.readCache&&f.isCached(n)?(i.segments=f.get(n),r(e),a.resolve(i.segments)):r(e)}var o=e("util-merge"),a=e("@apr/promise-polyfill"),s=e("../../lib/check/domain"),u=e("./request-ads"),c=e("./segments-fake"),f=e("./segments-cache");t.exports=function(e,t){t=o({},{readCache:!0,acceptFake:!0},t),e.ads=e.ads||{};var n=e.config.ads,r=e.ads,s=n&&n.domains&&n.mapping&&n.client;if(!s)throw new Error("Invalid ADS configuration");return r.hasOwnProperty("segments")?a.resolve(r.segments):i(e,t)}},{"../../lib/check/domain":35,"./request-ads":22,"./segments-cache":23,"./segments-fake":24,"@apr/promise-polyfill":5,"util-merge":18}],22:[function(e,t,n){"use strict";var r=e("querystring-es3/encode"),i=e("../../lib/consent"),o=e("../../lib/replace"),a=e("../../lib/ajax"),s=e("../../lib/log"),u=new i.DNTSelect("https://pdw-usr.userreport.com/api/v2/partner/{client}/uid?bust1","https://dnt-userreport.com/api/v2/partner/{client}/uid?bust1");t.exports=function(e,t){s.info("Requesting packages %s for %s",t.join(", "),e);var n=o(u,{client:e});return i.getForwardParams().then(function(e){return a({url:n+"&"+r(e),withCredentials:!0}).then(function(e){return e.data.ap&&e.data.ap.segments?e.data.ap.segments:[]})})}},{"../../lib/ajax":33,"../../lib/consent":37,"../../lib/log":43,"../../lib/replace":47,"querystring-es3/encode":14}],23:[function(e,t,n){"use strict";var r=e("./to-feature-segments-obj"),i=e("../../lib/map-obj"),o=e("../../lib/cache"),a=e("../../lib/log"),s=e("../../lib/CustomEvent"),u="apr_tdc",c=2592e6;n.isCached=function(e){var t=JSON.stringify(e),n=o.get(u,{source:t}),r=null!==n;return a.info("Segments cache %s",r?"hit":"miss"),r},n.get=function(e){var t=JSON.stringify(e),n=o.get(u,{source:t}),r=[];for(var i in n.d)n.d.hasOwnProperty(i)&&r.push.apply(r,n.d[i]);return a.info("Restored %d segments from cache",r.length),r},n.set=function(e,t){var n=JSON.stringify(e),f=r(e.mapping,t),d=0,l=i(f,function(e,t){return d+=t.length,["ap_"+e,t]});o.set(u,{ttl:c,source:n},{d:l}),window.dispatchEvent(new s("apr-tdc")),a.info("Stored %d segments into cache",d)}},{"../../lib/CustomEvent":30,"../../lib/cache":34,"../../lib/log":43,"../../lib/map-obj":44,"./to-feature-segments-obj":27}],24:[function(e,t,n){"use strict";var r=e("querystring-es3/decode"),i=e("array-shuffle"),o=e("../../lib/location"),a=e("../../lib/log"),s="__sak_fakeads";n.isActive=function(){var e=r(o().search);return e.hasOwnProperty(s)},n.chooseWithSettings=function(e,t){for(var n=i(e),r=[],o=0;o<t.length||0===n.length;o++){var s=t[o];if(0===s.indexOf("random")){var u=parseInt(s.slice("random".length))||1;r.push.apply(r,n.splice(0,u))}else{if(n.indexOf(s)===-1){a.error("Segment "+s+" unavailable");continue}r.push(s)}}return a.info("Fake ads choosed %d segments",r.length),r},n.choose=function(e){var t=r(o().search)[s].split(",");return n.chooseWithSettings(e,t)}},{"../../lib/location":42,"../../lib/log":43,"array-shuffle":6,"querystring-es3/decode":13}],25:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=[],r=Object.keys(e),i=0;i<r.length;i++)for(var o=r[i],a=e[o].map(String).filter(function(e){return t.indexOf(e)!==-1}),s=0;s<a.length;s++){var u=a[s];n.push({feature:o,segment:u})}return n}},{}],26:[function(e,t,n){"use strict";t.exports=function(e,t,n){n=!!n;for(var r=[],i=Object.keys(e),o=0;o<i.length;o++){var a=String(i[o]),s=e[a].map(String).filter(function(e){return t.indexOf(e)!==-1});(n||0!==s.length)&&r.push({feature:a,segments:s})}return r}},{}],27:[function(e,t,n){"use strict";t.exports=function(e,t,n){n=!!n;for(var r={},i=Object.keys(e),o=0;o<i.length;o++){var a=String(i[o]),s=e[a].map(String).filter(function(e){return t.indexOf(e)!==-1});(n||0!==s.length)&&(r[a]=s)}return r}},{}],28:[function(e,t,n){"use strict";var r=e("util-merge"),i=e("./lib/rnd"),o=e("./api"),a=JSON.parse('{"ads":{"client":"sakimm","domains":[{"userreport-core":true}],"mapping":{"a":[1,2,1100,1101],"b":[3,4,5,6,7,8,12,13,14,15,16,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032],"c":[9,10,11,1200,1201,1202,1203,1204,1205,1206],"d":[100,101,1301,1300],"e":[1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1611,1612,1613,1614,1615,1616,1617],"f":[300,301,302,303,304,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514],"g":[400,401,402,403,404,1400,1401,1402,1403,1404,1405,1406,1407,1408,1409,1410,1411,1412,1413,1414,1415,1416,1417,1418],"h":[2010,2011,2012],"x":[9001,9002,9003,9004,9005,418,10470,10471,13619,13618,13617,13614,13616,13663,13629,13633,13630,13628,13649,13632,13631,13634,14049,14051,14052,14054,14062,14066,13657,14206,14212,14218,14210,14214,14226,14222,14220,14211,14321,13549,15145,15143,15144,15146,14527,15391,14469,15383,15384,15142,10417,10472,15393,10480,14207,14209,14213,14215,14219,14221,14223,14224,14225,14227,14228,14319,13620,15396,15398,15394,15386,13708,15395,15404,15418,15405,15406,15407,15408,15539,15535,15534,15533,15531,15530,15529,15528,15527,15526,15523,15522,15521,15520,15519,15511,15510,15509,15508,15507,15505,15504,15503,15422,15502,15501,15499,15498,15497,15496,15491,15490,15489,15486,15484,15483,15481,15480,15472,15467,15466,15465,15462,15459,15457,15456,15453,15451,15450,15449,15409,15410,15419,15420,15421,15448,15447,15445,15441,15436,15432,15431,15430,15429,15426,15425,15424,15423,15492,15460,15461,15494,15517,15516,15515,15514,15513,15716,15715,15717,15714,15713,15712,15711,15791,15799,15455,15454,15538,14320,15387,15388,15389,15427,15428,15458,15463,15464,15469,15475,15482,15487,15493,15839,15841,15840,15843,15844,15845,15846,15847,15851,15852,15853,15854,15855,15856,15857,15858,15859,15850,15863,15864,15865,15866,15869,15870,15871,15872,15873,15874,15875,15876,15877,15878,15879,15880,15881,15882,15883,15884,15885,15886,15887,15888,15955,15956,15957,15958,15959,15960,15963,15964,15965,15966,15967,15988,16078,16052,16156,16157,16158,16159,16160,16161,15968,16166,16168,16170,16239,16240,16241,16243,16244,16293,16266,15477,16504,16490,16493,16496,16498,16501,16506,16512,16514,16516,16519,16520,16521,16522,16523,16524,16525,16491,16517,16540,16539,16529,16518,16513,16573,16515,16492,16500,16502,16505,16507,16508,16509,16510,16511,16499,16497,16579,16536,16594,16595,16503,16624,16625,16628,16669,16642,16641,16640,16639,16638,16637,16636,16635,16634,16633,16632,16887,16889,16888,16861,16920,16919,16949,16898,16897,16865,16864,16863,16495,16494,16534,16630,16631,16959,16960,16971,16970,16629,17116,17044,17117,17118,17120,17121,17122,17129,17128,17154,17160],"i":[2001,2002,2000,2003,2004],"j":[2020,2021,2022,2023,2024,2025,2026,2027],"k":[2030,2031,2032,2033,2034]},"packages":["a","b"]},"dfp-link":{"features":["KeyValues"],"networkId":176986657,"masterSegmentId":514639472},"dfp-sync":{"segmentId":514639472,"emea":176986657},"dfp-targeting-nomock":{},"iabcmp":{},"userreport-ak":{"trackingConfig":[{"trackingCode":"IMMm-PHD4DWKQwUlnFAjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"0df8703c-9062-49c1-6714-08d46c52c521"},{"trackingCode":"IMMm-_iiBEg68t0pnFwjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"128128fe-bc0e-4ab7-6717-08d46c52c521"},{"trackingCode":"IMMm-C5jFEuxJcE5nDQjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"12c5980b-49ec-4e70-670d-08d46c52c521"},{"trackingCode":"IMMm-oHgqGndvjkZnEAjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"1a2a78a0-6f77-468e-6710-08d46c52c521"},{"trackingCode":"IMMm-qgIlIVAFFEXblgjUbFD_hg","sectionId":null,"type":"Media","mediaId":"212502aa-0550-4514-db96-08d46c50ff86"},{"trackingCode":"IMMm-uX1bJF818URnEgjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"245b7db9-355f-44f1-6712-08d46c52c521"},{"trackingCode":"IMMm-rwlMMcO88EXbnQjUbFD_hg","sectionId":null,"type":"Media","mediaId":"314c09af-bcc3-45f0-db9d-08d46c50ff86"},{"trackingCode":"IMMm-m6lRM3VMakbblAjUbFD_hg","sectionId":null,"type":"Media","mediaId":"3351a99b-4c75-466a-db94-08d46c50ff86"},{"trackingCode":"IMMm-DSeKM6PPm0DbmwjUbFD_hg","sectionId":null,"type":"Media","mediaId":"338a270d-cfa3-409b-db9b-08d46c50ff86"},{"trackingCode":"IMMm-F2J1NyKh0EmLsE1lhB3XWA","sectionId":null,"type":"Media","mediaId":"37756217-a122-49d0-8bb0-4d65841dd758"},{"trackingCode":"IMMm-mwmaPAnsfEvbkgjUbFD_hg","sectionId":null,"type":"Media","mediaId":"3c9a099b-ec09-4b7c-db92-08d46c50ff86"},{"trackingCode":"IMMm-ci7-QR66lUjbmAjUbFD_hg","sectionId":null,"type":"Media","mediaId":"41fe2e72-ba1e-4895-db98-08d46c50ff86"},{"trackingCode":"IMMm-toPQUbhM2UVnGQjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"51d083b6-4cb8-45d9-6719-08d46c52c521"},{"trackingCode":"IMMm-2Zo7bIwAYkJnGAjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"6c3b9ad9-008c-4262-6718-08d46c52c521"},{"trackingCode":"IMMm-JFrJjL_ka0OAXt634p7YlQ","sectionId":null,"type":"Media","mediaId":"8cc95a24-e4bf-436b-805e-deb7e29ed895"},{"trackingCode":"IMMm-xUENkgbVPkvboAjUbFD_hg","sectionId":null,"type":"Media","mediaId":"920d41c5-d506-4b3e-dba0-08d46c50ff86"},{"trackingCode":"IMMm-BSUQm1eIak_blQjUbFD_hg","sectionId":null,"type":"Media","mediaId":"9b102505-8857-4f6a-db95-08d46c50ff86"},{"trackingCode":"IMMm-cS_9nZ5zS0rbmQjUbFD_hg","sectionId":null,"type":"Media","mediaId":"9dfd2f71-739e-4a4b-db99-08d46c50ff86"},{"trackingCode":"IMMm-hBwRn0N6L0m5wtRCd-ZAoQ","sectionId":null,"type":"Media","mediaId":"9f111c84-7a43-492f-b9c2-d44277e640a1"},{"trackingCode":"IMMm-MuNxvD6gN0XbnAjUbFD_hg","sectionId":null,"type":"Media","mediaId":"bc71e332-a03e-4537-db9c-08d46c50ff86"},{"trackingCode":"IMMm-SJoWxTF-eE7bogjUbFD_hg","sectionId":null,"type":"Media","mediaId":"c5169a48-7e31-4e78-dba2-08d46c50ff86"},{"trackingCode":"IMMm-_r_uyoA_lUXbkwjUbFD_hg","sectionId":null,"type":"Media","mediaId":"caeebffe-3f80-4595-db93-08d46c50ff86"},{"trackingCode":"IMMm-a9nAy6p9mU1nFgjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"cbc0d96b-7daa-4d99-6716-08d46c52c521"},{"trackingCode":"IMMm-dafEz4SwK05nFQjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"cfc4a775-b084-4e2b-6715-08d46c52c521"},{"trackingCode":"IMMm-n04f0Ls1FULbkQjUbFD_hg","sectionId":null,"type":"Media","mediaId":"d01f4e9f-35bb-4215-db91-08d46c50ff86"},{"trackingCode":"IMMm--dUi0tEM4UXbngjUbFD_hg","sectionId":null,"type":"Media","mediaId":"d222d5f9-0cd1-45e1-db9e-08d46c50ff86"},{"trackingCode":"IMMm-gNeg1oapY0lnDgjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"d6a0d780-a986-4963-670e-08d46c52c521"},{"trackingCode":"IMMm-yHm_2F7990-psvUXHekHxQ","sectionId":null,"type":"Media","mediaId":"d8bf79c8-fd5e-4ff7-a9b2-f5171de907c5"},{"trackingCode":"IMMm-Q7yx4-uEX0yhpoWlZ437hw","sectionId":null,"type":"Media","mediaId":"e3b1bc43-84eb-4c5f-a1a6-85a5678dfb87"},{"trackingCode":"IMMm-Pbhd7SZpJUfboQjUbFD_hg","sectionId":null,"type":"Media","mediaId":"ed5db83d-6926-4725-dba1-08d46c50ff86"},{"trackingCode":"IMMm-RWBb7jhnnUDbmgjUbFD_hg","sectionId":null,"type":"Media","mediaId":"ee5b6045-6738-409d-db9a-08d46c50ff86"},{"trackingCode":"IMMm-UvUX8DrwrUKWfAUjrwf0zA","sectionId":null,"type":"Media","mediaId":"f017f552-f03a-42ad-967c-0523af07f4cc"},{"trackingCode":"IMMm-WrSi8TGTNk3blwjUbFD_hg","sectionId":null,"type":"Media","mediaId":"f1a2b45a-9331-4d36-db97-08d46c50ff86"},{"trackingCode":"IMMm-eUyP83D8SEPbnwjUbFD_hg","sectionId":null,"type":"Media","mediaId":"f38f4c79-fc70-4348-db9f-08d46c50ff86"},{"trackingCode":"IMMm-7_XJ95C6nU1nDwjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"f7c9f5ef-ba90-4d9d-670f-08d46c52c521"},{"trackingCode":"IMMm-oakP-5pR8kRnEwjUbFLFIQ","sectionId":null,"type":"Media","mediaId":"fb0fa9a1-519a-44f2-6713-08d46c52c521"}]},"userreport-core":{"networkLayout":[{"rules":[{"pattern":"*.gardenersworld.com","operation":"DomainEquals"}],"id":"0df8703c-9062-49c1-6714-08d46c52c521","color":"#4E8317","sections":[]},{"rules":[{"pattern":"*.theyarnloop.com","operation":"DomainEquals"}],"id":"128128fe-bc0e-4ab7-6717-08d46c52c521","color":"#636776","sections":[]},{"rules":[{"pattern":"*.bbcgoodfood.com","operation":"DomainEquals"}],"id":"12c5980b-49ec-4e70-670d-08d46c52c521","color":"#BE2A77","sections":[]},{"rules":[{"pattern":"*.topgear.com","operation":"DomainEquals"}],"id":"1a2a78a0-6f77-468e-6710-08d46c52c521","color":"#348BB4","sections":[]},{"rules":[{"pattern":"*.discoverwildlife.com","operation":"DomainEquals"}],"id":"212502aa-0550-4514-db96-08d46c50ff86","color":"#F7A702","sections":[]},{"rules":[{"pattern":"*.220triathlon.com","operation":"DomainEquals"}],"id":"245b7db9-355f-44f1-6712-08d46c52c521","color":"#C44A4C","sections":[]},{"rules":[{"pattern":"*.classical-music.com","operation":"DomainEquals"}],"id":"314c09af-bcc3-45f0-db9d-08d46c50ff86","color":"#000000","sections":[]},{"rules":[{"pattern":"*.youandyourwedding.co.uk","operation":"DomainEquals"}],"id":"3351a99b-4c75-466a-db94-08d46c50ff86","color":"#FB2F73","sections":[]},{"rules":[{"pattern":"*.sciencefocus.com","operation":"DomainEquals"}],"id":"338a270d-cfa3-409b-db9b-08d46c50ff86","color":"#010C0E","sections":[]},{"rules":[{"pattern":"*.radiotimes.com","operation":"DomainEquals"}],"id":"37756217-a122-49d0-8bb0-4d65841dd758","color":"#010000","sections":[]},{"rules":[{"pattern":"*.outdoorsmagic.com","operation":"DomainEquals"}],"id":"3c9a099b-ec09-4b7c-db92-08d46c50ff86","color":"#0E527F","sections":[]},{"rules":[{"pattern":"*.historyrevealed.com","operation":"DomainEquals"}],"id":"41fe2e72-ba1e-4895-db98-08d46c50ff86","color":"#6F9BAE","sections":[]},{"rules":[{"pattern":"*.papercraftinspirationsmagazine.co.uk","operation":"DomainEquals"}],"id":"51d083b6-4cb8-45d9-6719-08d46c52c521","color":"#FE4C91","sections":[]},{"rules":[{"pattern":"*.simplycrochetmag.co.uk","operation":"DomainEquals"}],"id":"6c3b9ad9-008c-4262-6718-08d46c52c521","color":"#EC0974","sections":[]},{"rules":[{"pattern":"*.bikeradar.com","operation":"DomainEquals"}],"id":"8cc95a24-e4bf-436b-805e-deb7e29ed895","color":"#0064B4","sections":[]},{"rules":[{"pattern":"*.cross-stitching.com","operation":"DomainEquals"}],"id":"920d41c5-d506-4b3e-dba0-08d46c50ff86","color":"#9083BB","sections":[]},{"rules":[{"pattern":"*.planyourperfectwedding.com","operation":"DomainEquals"}],"id":"9b102505-8857-4f6a-db95-08d46c50ff86","color":"#F15F7F","sections":[]},{"rules":[{"pattern":"*.historyextra.com","operation":"DomainEquals"}],"id":"9dfd2f71-739e-4a4b-db99-08d46c50ff86","color":"#C74A1B","sections":[]},{"rules":[{"pattern":"*.gathered.how","operation":"DomainEquals"}],"id":"9f111c84-7a43-492f-b9c2-d44277e640a1","color":null,"sections":[]},{"rules":[{"pattern":"*.skyatnightmagazine.com","operation":"DomainEquals"}],"id":"bc71e332-a03e-4537-db9c-08d46c50ff86","color":"#171412","sections":[]},{"rules":[{"pattern":"*.craft-seller.com","operation":"DomainEquals"}],"id":"c5169a48-7e31-4e78-dba2-08d46c50ff86","color":"#3E1805","sections":[]},{"rules":[{"pattern":"*.juniormagazine.co.uk","operation":"DomainEquals"}],"id":"caeebffe-3f80-4595-db93-08d46c50ff86","color":"#FF008A","sections":[]},{"rules":[{"pattern":"*.countryfile.com","operation":"DomainEquals"}],"id":"cbc0d96b-7daa-4d99-6716-08d46c52c521","color":"#4C93A2","sections":[]},{"rules":[{"pattern":"*.gardensillustrated.com","operation":"DomainEquals"}],"id":"cfc4a775-b084-4e2b-6715-08d46c52c521","color":"#817E7B","sections":[]},{"rules":[{"pattern":"*.olivemagazine.com","operation":"DomainEquals"}],"id":"d01f4e9f-35bb-4215-db91-08d46c50ff86","color":"#66CEBC","sections":[]},{"rules":[{"pattern":"*.molliemakes.com","operation":"DomainEquals"}],"id":"d222d5f9-0cd1-45e1-db9e-08d46c50ff86","color":"#EC658B","sections":[]},{"rules":[{"pattern":"*.healthyfood.co.uk","operation":"DomainEquals"}],"id":"d6a0d780-a986-4963-670e-08d46c52c521","color":"#AED075","sections":[]},{"rules":[{"pattern":"*.ekbbmagazine.co.uk","operation":"DomainEquals"}],"id":"d8bf79c8-fd5e-4ff7-a9b2-f5171de907c5","color":null,"sections":[]},{"rules":[{"pattern":"www.madeformums.com/forum/","operation":"StartsWith"},{"pattern":"www.madeformums.com/getting-pregnant/","operation":"StartsWith"},{"pattern":"www.madeformums.com/pregnancy/","operation":"StartsWith"},{"pattern":"www.madeformums.com/baby/","operation":"StartsWith"},{"pattern":"www.madeformums.com/toddler-and-preschool/","operation":"StartsWith"},{"pattern":"www.madeformums.com/school-and-family/","operation":"StartsWith"}],"id":"e3b1bc43-84eb-4c5f-a1a6-85a5678dfb87","color":"#FFDE00","sections":[]},{"rules":[{"pattern":"*.lovepatchworkandquilting.com","operation":"DomainEquals"}],"id":"ed5db83d-6926-4725-dba1-08d46c50ff86","color":"#00B6B2","sections":[]},{"rules":[{"pattern":"*.whodoyouthinkyouaremagazine.com","operation":"DomainEquals"}],"id":"ee5b6045-6738-409d-db9a-08d46c50ff86","color":"#7AB2E5","sections":[]},{"rules":[{"pattern":"*.lonelyplanet.com","operation":"DomainEquals"}],"id":"f017f552-f03a-42ad-967c-0523af07f4cc","color":"#2F3298","sections":[]},{"rules":[{"pattern":"*.homesandantiques.com","operation":"DomainEquals"}],"id":"f1a2b45a-9331-4d36-db97-08d46c50ff86","color":"#FBDB74","sections":[]},{"rules":[{"pattern":"*.cardmakingandpapercraft.com","operation":"DomainEquals"}],"id":"f38f4c79-fc70-4348-db9f-08d46c50ff86","color":"#EE7AAE","sections":[]},{"rules":[{"pattern":"*.deliciousmagazine.co.uk","operation":"DomainEquals"}],"id":"f7c9f5ef-ba90-4d9d-670f-08d46c52c521","color":"#011014","sections":[]},{"rules":[{"pattern":"*.hitched.co.uk","operation":"DomainEquals"}],"id":"fb0fa9a1-519a-44f2-6713-08d46c52c521","color":"#78498F","sections":[]}],"companyId":"1b3c07ce-1909-4639-66fc-08d46affcb75"},"userreport-invitation-utils":{"customTranslations":{"GiftTooltipMessage":"Upon completion of this survey we’ll enter you into a prize draw where you’ll have the chance to win one of fifty £40 gift cards","InvitationText":"<h1>Tell us your opinion and participate in our gift card <a class=\\"urp_gift\\">prize draw</a>.</h1>\\nHelp us understand our audience and improve the services and advertising we offer by responding to a couple of quick questions about your experience of the site, lifestyle and interests. <a href=\\"https://www.audienceproject.com/\\" target=\\"_blank\\">AudienceProject</a> are a market research company who are hosting this survey on behalf of {SiteName}.","AcceptPolicyText":"I have read and accept the  <a href=\\"{PolicyLink}\\" id=\\"ppLink\\"  target=\\"_blank\\">privacy policy</a> and the <a href=\\"https://www.userreport.com/prize-draw-terms-conditions/\\" target=\\"_blank\\">prize draw terms</a>."},"domainSpecific":{"www.madeformums.com":{"inviteOnSession":2,"inviteOnSessionPageview":1}},"inviteOnSessionPageview":2,"inviteOnSession":1}}'),s=JSON.parse('["dfp-sync","dfp-targeting-nomock","iabcmp","userreport-ak","userreport-core","userreport-invitation-utils"]'),u=!!parseInt("0")||window.location.href.indexOf("__sak=debug")!==-1||"undefined"!=typeof window&&"true"===window.localStorage.getItem("__sak_debug"),c=window.location.href.indexOf("__sak=disable")!==-1||window.location.href.indexOf("__sak=disable")!==-1,f={customerId:"immediate",customerConfig:a,debug:u,dnt:!1,consents:{tcStringV2:"",tcStringV1:"",storage:!0},disabled:c,plugins:s,revision:"31ce2b2",publishDate:"2022-02-10T17:31:02.849Z",sessionId:i()};o.setAnonymousTracking=function(e){f.dnt=e},o.setConsents=function(e){f.consents=r(f.consents,e)},t.exports=f},{"./api":20,"./lib/rnd":48,"util-merge":18}],29:[function(e,t,n){"use strict";function r(e){var t=e[0];return!("function"!=typeof f[t]||!(f[t].executeBeforePlugins||l.indexOf(t)>-1))}function i(e){if("object"==typeof e)for(var t=0,n=e.length;t<n;t++)window.audienceProjectLayer.push(e[t])}function o(){for(var e=window.location.href.split(/[?&]/),t="__audienceProjectLayer=",n=0,r=e.length;n<r;n++)if(0===e[n].indexOf(t)){var o=e[n].slice(t.length);try{o=JSON.parse(decodeURIComponent(o))}catch(e){return void c.warn("Unable to parse audienceProjectLayer queue from location")}i(o)}}function a(){window.audienceProjectLayer.filter(r).forEach(h),window._urq.filter(r).forEach(h)}function s(){if(window.audienceProjectLayer.push===Array.prototype.push){var e=window.audienceProjectLayer.push;window.audienceProjectLayer.push=function(t){e.apply(window.audienceProjectLayer,arguments),h(t)},window.audienceProjectLayer.filter(function(e){return!r(e)}).forEach(h);var t=window._urq.push;window._urq.push=function(e){t.apply(window._urq,arguments),h(e)},window._urq.filter(function(e){return!r(e)}).forEach(h)}}var u=e("@apr/promise-polyfill"),c=e("./lib/log"),f=e("./api"),d=e("./config");window.audienceProjectLayer=window.audienceProjectLayer||[],window._urq=window._urq||[];var l=["setAnonymousTracking","setConsents"],p=["tryToInvite","inhibitInvitation","initSite","integrateWithGTM","suppressCookieSync","setPrivacyPolicyChecked","setCustomTranslation","setGDPR","setGDPRConsent","forwardAnonymousTracking","forwardConsents"],h=function(e){var t=e[0],n=Array.prototype.slice.call(e,1);"function"==typeof t?t.apply(null,n):"function"==typeof f[t]?f[t].apply(null,n):p.indexOf(t)!==-1||c.error("Unable to find command %s",t)};window.addEventListener("message",function(e){if(e.data&&e.data.indexOf&&0===e.data.indexOf("audienceProjectLayer$$$")){var t=e.data.split("$$$",3),n=t[1],r=t[2];r&&(r=JSON.parse(r)),window.audienceProjectLayer.push([n,r])}},!1),t.exports=function(e,t,n,r){c.info("Customer config:",t),c.info("SAK config:",n),t.iabcmp&&t.iabcmp.tcStringV2?d.consents.tcStringV2=t.iabcmp.tcStringV2:t.iabcmp&&t.iabcmp.tcStringV1&&(d.consents.tcStringV1=t.iabcmp.tcStringV1);var i={config:t,sakConfig:n,isSpider:r};n.sakObject.starting.fire(i),r&&(e=e.filter(function(e){return e.executeForSpiders})),o(),c.info("API queue:",window.audienceProjectLayer,window._urq),a();var f=e.map(function(e){return new u(function(t){t(e(i))})}),l=u.all(f);return n.sakObject.started.fire(i),s(),l}},{"./api":20,"./config":28,"./lib/log":43,"@apr/promise-polyfill":5}],30:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),n}"undefined"!=typeof window&&(r.prototype=window.Event.prototype);try{new window.CustomEvent("test"),t.exports=window.CustomEvent}catch(e){t.exports=r}},{}],31:[function(e,t,n){"use strict";function r(){this._firedEvents=[],this._callbacks=[]}r.prototype.subscribe=function(e,t){if(t)for(var n=0;n<this._firedEvents.length;n++)e.apply(null,this._firedEvents[n]);return this._callbacks.push(e),function(){return this.unsubscribe(e)}.bind(this)},r.prototype.unsubscribe=function(e){var t=this._callbacks.indexOf(e);t!==-1&&this._callbacks.splice(t,1)},r.prototype.fire=function(){var e=Array.prototype.slice.call(arguments,0);this._firedEvents.push(e);for(var t=[],n=this._callbacks.slice(0),r=0,i=n.length;r<i;r++)try{n[r].apply(null,e)}catch(e){t.push(e)}if(0!==t.length){var o=t.map(function(e){return String(e.stack)||String(e)}).join("\n\n");throw new Error("Errors while calling subscribers\n"+o)}},t.exports=r},{}],32:[function(e,t,n){"use strict";t.exports=function(e,t){t=t||{},"async"in t==!1&&(t.async=!0);var n=document.createElement("script");if(n.type="text/javascript",n.src=e,t.id){if(document.getElementById(t.id))return;n.id=t.id}n.async=t.async;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}},{}],33:[function(e,t,n){"use strict";var r=e("nanoajax"),i=e("@apr/promise-polyfill"),o=e("../lib/merge"),a={method:"GET",headers:{},cors:!0,withCredentials:!1,responseType:"text",jsonResponse:!0,jsonRequest:!0,expectOk:!0};t.exports=function(e){e=o(a,e),e.jsonRequest&&(e.hasOwnProperty("payload")&&(e=o({body:JSON.stringify(e.payload)},e)),e.hasOwnProperty("body")&&(e=o(e,{headers:o({"Content-Type":"application/json"},e.headers)})));var t=" when "+e.method+" "+e.url,n=new i(function(n,i){r.ajax(e,function(e,r){if(0===e){var o=new Error(r+t);i(o)}else{var a={code:e,body:r};n(a)}})});return n.then(function(n){if(e.expectOk&&(n.code<200||n.code>=300))throw new Error("Bad response code "+n.code+t);if(e.jsonResponse){var r=JSON.parse(n.body);n=o(n,{data:r})}return n})}},{"../lib/merge":45,"@apr/promise-polyfill":5,nanoajax:11}],34:[function(e,t,n){"use strict";var r=e("./merge"),i=e("./hash"),o={ttl:null,source:null};n.set=function(e,t,n){t=r(o,t);var a=Date.now(),s={at:a};t.ttl&&(s.exp=a+t.ttl),t.source&&(s.src=i(t.source)),s=r({},s,n);var u=JSON.stringify(s);try{window.localStorage.setItem(e,u)}catch(e){}},n.get=function(e,t){t=r(o,t||{});try{var a=window.localStorage.getItem(e);if(a){var s=JSON.parse(a),u=!s.exp||Date.now()<s.exp,c=null===t.source||i(t.source)===s.src;if(u&&c)return s}}catch(e){}return n.remove(e),null},n.remove=function(e){try{window.localStorage.removeItem(e)}catch(e){}}},{"./hash":40,"./merge":45}],35:[function(e,t,n){"use strict";var r=e("../../lib/location");t.exports=function(e,t){t||(t=r().hostname);for(var n=t.split(".").reverse(),i=e.split(".").reverse(),o=0;;o++){if(o>=n.length)return i.length===n.length||i.length-n.length===1&&"*"===i[i.length-1];if(o>=i.length){if("*"===i[i.length-1])continue;return!1}if("*"!==i[o]&&i[o].toLowerCase()!==n[o].toLowerCase())return!1}}},{"../../lib/location":42}],36:[function(e,t,n){"use strict";var r=e("../../lib/location");t.exports=function(e,t){if(t||(t=r().pathname),"/"===e)return"/"===t;e="/"+e.replace(/(^\/|\/$)/g,"");var n=t.slice(e.length*-1)===e,i=t.indexOf(e+"/")!==-1;
return n||i}},{"../../lib/location":42}],37:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),i=e("../config");n.IDENTIFY=1,n.TARGET_ADS=3,n.TARGET_CONTENT=4,n.MEASURE=5,n.V2_USE_DEVICE=1,n.V2_CREATE_ADS_PROFILE=3,n.V2_SELECT_PERSONALIZED_CONTENT=6,n.V2_MEASURE_PERFORMANCE_CONTENT=8;var o={acquire:function(){return r.resolve(!0)},getForwardParams:function(){return r.resolve({})},getConsentData:function(){return r.resolve({})},hasTTL:function(){return!1}},a=o;n.enable=function(e){a=e},n.disable=function(){a=o},n.acquire=function(e){return a.acquire(e)},n.getForwardParams=function(){return a.getForwardParams()},n.getConsentData=function(){return a.getConsentData()},n.hasTTL=function(){return a.hasTTL()};var s=function(e,t){this.toString=this.valueOf=function(){return i.dnt?t:e}};s.prototype=String.prototype,n.DNTSelect=s},{"../config":28,"@apr/promise-polyfill":5}],38:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="",r=0;r<e;r+=1)n+=t;return n}function i(e,t){return r(Math.max(0,t))+e}function o(e,t,n){return parseInt(e.substr(t,n),2)}function a(e,t,n){return new Date(100*o(e,t,n))}function s(e,t){return 1===parseInt(e.substr(t,1),2)}function u(e){var t=o(e);return String.fromCharCode(t+65).toLowerCase()}function c(e,t,n){var r=e.substr(t,n);return u(r.slice(0,n/2))+u(r.slice(n/2))}function f(e){var t=e.input,n=e.output,r=e.startPosition,i=e.field,u=i.type,f=i.numBits,d=i.decoder,p=i.validator,h=i.listCount;if("function"==typeof p&&!p(n))return{newPosition:r};if("function"==typeof d)return d(t,n,r);var g="function"==typeof f?f(n):f;switch(u){case"int":return{fieldValue:o(t,r,g)};case"bool":return{fieldValue:s(t,r)};case"date":return{fieldValue:a(t,r,g)};case"bits":return{fieldValue:t.substr(r,g)};case"list":return l(t,n,r,i,h);case"language":return{fieldValue:c(t,r,g)};default:throw new Error("ConsentString - Unknown field type "+u+" for decoding")}}function d(e){var t=e.input,n=e.fields,r=e.startPosition,i=void 0===r?0:r,o=i,a=n.reduce(function(e,n){var r=n.name,i=n.numBits,a=f({input:t,output:e,startPosition:o,field:n}),s=a.fieldValue,u=a.newPosition;return void 0!==s&&(e[r]=s),void 0!==u?o=u:"number"==typeof i&&(o+=i),e},{});return{decodedObject:a,newPosition:o}}function l(e,t,n,r,i){var o=0;"function"==typeof i?o=i(t):"number"==typeof i&&(o=i);for(var a=n,s=[],u=0;u<o;u+=1){var c=d({input:e,fields:r.fields,startPosition:a});a=c.newPosition,s.push(c.decodedObject)}return{fieldValue:s,newPosition:a}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=o(e,0,y);if("number"!=typeof n)throw new Error("ConsentString - Unknown version number in the string to decode");if(!v[n])throw new Error("ConsentString - Unsupported version "+n+" in the string to decode");var r=t[n].fields,i=d({input:e,fields:r}),a=i.decodedObject;return a}function h(e,t){for(var n=e;n.length%4!==0;)n+="=";n=n.replace(/-/g,"+").replace(/_/g,"/");for(var r=atob(n),o="",a=0;a<r.length;a+=1){var s=r.charCodeAt(a).toString(2);o+=i(s,8-s.length)}return p(o,t)}function g(e){return e.split("").reduce(function(e,t,n){return"1"===t&&e.indexOf(n+1)===-1&&e.push(n+1),e},[])}function m(e){var t=h(e),n=t.version,r=t.cmpId,i=t.vendorListVersion,o=t.purposeIdBitString,a=t.maxVendorId,s=t.created,u=t.lastUpdated,c=t.isRange,f=t.defaultConsent,d=t.vendorIdBitString,l=t.vendorRangeList,p=t.cmpVersion,m=t.consentScreen,y=t.consentLanguage,v={version:n,cmpId:r,vendorListVersion:i,allowedPurposeIds:g(o),maxVendorId:a,created:s,lastUpdated:u,cmpVersion:p,consentScreen:m,consentLanguage:y};if(c){var w=l.reduce(function(e,t){for(var n=t.isRange,r=t.startVendorId,i=t.endVendorId,o=n?i:r,a=r;a<=o;a+=1)e[a]=!0;return e},{});v.allowedVendorIds=[];for(var b=1;b<=a;b+=1)(f&&!w[b]||!f&&w[b])&&v.allowedVendorIds.indexOf(b)===-1&&v.allowedVendorIds.push(b)}else v.allowedVendorIds=g(d);return v}var y=6,v={1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}};t.exports=m},{}],39:[function(e,t,n){"use strict";var r=e("./map-obj"),i=e("./replace"),o=e("./log");t.exports=function(e,t,n,a){t=t||{},n=n||{},(a||"undefined"==typeof a)&&(n=r(n,function(e,t){return[e,encodeURIComponent(t)]})),e=i(e,n);var s=[];for(var u in t)t.hasOwnProperty(u)&&t[u]&&s.push(encodeURIComponent(u)+"="+encodeURIComponent(t[u]));0!==s.length&&(e+=e.indexOf("?")===-1?"?":"&",e+=s.join("&")),o.info("Firing pixel %s",e),(new window.Image).src=e}},{"./log":43,"./map-obj":44,"./replace":47}],40:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2,siphash:15}],41:[function(e,t,n){"use strict";var r=[/bot/i,/spider/i,/facebookexternalhit/i,/simplepie/i,/yahooseeker/i,/embedly/i,/quora link preview/i,/outbrain/i,/vkshare/i,/monit/i,/Pingability/i,/Monitoring/i,/WinHttpRequest/i,/Apache-HttpClient/i,/getprismatic.com/i,/python-requests/i,/Twurly/i,/yandex/i,/browserproxy/i,/crawler/i,/Qwantify/i,/Yahoo! Slurp/i,/pinterest/i,/Tumblr\/14.0.835.186/i,/Tumblr Agent 14.0/i];t.exports=function(e){return r.some(function(t){return t.test(e)})}},{}],42:[function(e,t,n){"use strict";function r(){var e=o||window.location.toString();if(e=e.replace(/\.demo\.audienceproject\.com\//,"/"),a.url===e)return a.parsed;var t=i(e);return a.url=e,a.parsed=t,t}var i=e("./parseUrl"),o=null,a={};t.exports=r,t.exports.onLocationChange=function(e){var t=r().pathname,n=setInterval(function(){var n=r().pathname;n!==t&&(t=n,e(n))},100);return function(){clearInterval(n)}},t.exports.updateLocation=function(e){i(e),o=e},t.exports.parse=i},{"./parseUrl":46}],43:[function(e,t,n){"use strict";var r=e("./Event"),i=new r;t.exports.subscribe=i.subscribe.bind(i),t.exports.unsubscribe=i.unsubscribe.bind(i),t.exports.log=i.fire.bind(i,"log"),t.exports.info=i.fire.bind(i,"info"),t.exports.warn=i.fire.bind(i,"warn"),t.exports.error=i.fire.bind(i,"error")},{"./Event":31}],44:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=t(r[i],e[r[i]]);n[o[0]]=o[1]}return n}},{}],45:[function(e,t,n){"use strict";t.exports=function(){for(var e,t,n=Object.prototype.hasOwnProperty,r={},i=0,o=arguments.length;i<o;++i){t=arguments[i];for(e in t)n.call(t,e)&&(r[e]=t[e])}return r}},{}],46:[function(e,t,n){"use strict";function r(e){var t=0!==e.indexOf("/")&&e.indexOf("/")!==-1&&(e.indexOf(":")===-1||e.indexOf(":")>e.indexOf("/")),n=i.exec(t?"noscheme://"+e:e),r={scheme:t?"":n[2]||"",host:n[4]||"",hostname:n[4]?n[4].split(":")[0]:"",pathname:n[5]||"",search:n[7]||"",hash:n[9]||"",toString:function(){return e}};return r.origin=r.scheme+"://"+r.host,r}var i=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?");t.exports=r},{}],47:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.split("{"+n+"}").join(String(t[n])));return e}},{}],48:[function(e,t,n){"use strict";t.exports=function(e){e=e||10;for(var t="";t.length<e;)t+=Math.random().toString(36).slice(2,3);return t}},{}],49:[function(e,t,n){"use strict";t.exports=function(){var e=Array.prototype,t=Object.keys&&Date.now&&e.forEach&&e.map&&e.filter&&e.indexOf&&e.some;return!!t}},{}],50:[function(e,t,n){"use strict";var r=e("@apr/promise-polyfill"),i=e("util-merge"),o=e("../"),a=e("../lib/log"),s=e("../lib/Event"),u=e("./log-to-console"),c=e("./check-browser"),f=e("../config"),d=e("../lib/isSpider.js");r._setUnhandledRejectionFn&&r._setUnhandledRejectionFn(a.error);try{if(f.debug&&u(),f.sakObject=window.__sak=i({},{customers:[],loaded:new s,starting:new s,started:new s},window.__sak||{}),a.info("Revision: %s; Publish date: %s; Customer: %s",f.revision,f.publishDate&&new Date(f.publishDate).toGMTString(),f.customerId),f.disabled)return void a.info("Disabled");if(c()===!1)return void a.info("Browser not supported");var l=d(window.navigator.userAgent);l&&a.warn("User agent is a bot-like, will be executed only plugins that declare that they can be called for bot-environments using `executeForSpiders = true`");var p=!!f.customerId&&f.sakObject.customers.indexOf(f.customerId)!==-1;if(f.sakObject.loaded.fire(f),p===!1){f.customerId&&f.sakObject.customers.push(f.customerId);var h=f.plugins.map(function(t){return e("plugin:"+t)});o(h,f.customerConfig,f,l).catch(a.error)}}catch(e){a.error(e)}},{"../":29,"../config":28,"../lib/Event":31,"../lib/isSpider.js":41,"../lib/log":43,"./check-browser":49,"./log-to-console":51,"@apr/promise-polyfill":5,"util-merge":18}],51:[function(e,t,n){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);"string"==typeof t[0]?t[0]="SAK :: "+t[0]:t.unshift("SAK:");try{console[e].apply(console,t)}catch(n){switch(t.length){case 1:console.log(e,t[0]);break;case 2:console.log(e,t[0],t[1]);break;case 3:console.log(e,t[0],t[1],t[2]);break;default:console.log(e,t)}}}var i=e("../lib/log");t.exports=function(){return i.subscribe(r)}},{"../lib/log":43}],52:[function(e,t,n){"use strict";function r(){var t=window.hasOwnProperty("apr")===!1;return e("../snippets/main"),t&&delete window.apr,window.__APRSAK}function i(e){if("function"==typeof e)return e;if("string"==typeof e)return function(t){return t.k===e};throw new Error("Wrong predicate")}function o(e){e=i(e);var t=r();if(t)for(var n=0,o=t._cmds.length;n<o;n++){var a=t._cmds[n];if(e(a))return t._cmds.splice(n,1),a}}function a(e){for(var t,n=[];void 0!==(t=o(e));)n.push(t);return n}function s(e,t){a(e).forEach(t);var n=r();n._subs.push(function(){a(e).forEach(t)})}t.exports.takeSingle=o,t.exports.takeAll=a,t.exports.take=s},{"../snippets/main":19}],"plugin:dfp-sync":[function(e,t,n){"use strict";var r=e("../api/ads"),i=e("../api/ads/to-feature-segment-arr"),o=e("../lib/rnd"),a=e("../lib/log"),s=e("../lib/fire-pixel"),u="https://pubads.g.doubleclick.net/activity;dc_iu=/{emea}/DFPAudiencePixel;ord={rnd};dc_seg={segmentId};{params}?";t.exports=function(e){var t=e.config["dfp-sync"];return r(e).then(function(n){var r=i(e.config.ads.mapping,n),c=r.map(function(e){return"ap_"+e.feature+"="+e.segment});return 0===c.length?void a.info("Nothing to sync"):(a.info("Sending segments %s",c.join(";")),void s(u,{},{emea:t.emea,segmentId:t.segmentId,params:c.join(";"),rnd:o()},!1))})}},{"../api/ads":21,"../api/ads/to-feature-segment-arr":25,"../lib/fire-pixel":39,"../lib/log":43,"../lib/rnd":48}],"plugin:dfp-targeting-nomock":[function(e,t,n){"use strict";function r(e){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){e.forEach(function(e){a.info("Targeting",e.feature,e.segments),window.googletag.pubads().setTargeting("ap_"+e.feature,e.segments)})})}var i=e("../api/ads"),o=e("../api/ads/to-feature-segments-arr"),a=e("../lib/log"),s=e("../public-api");t.exports=function(e){return i(e).then(function(t){if(!e.config["dfp-targeting-nomock"].disableKeyValuesSending){var n=o(e.config.ads.mapping,t);r(n)}}).finally(function(){s.take("dfp-targeting-done",function(e){try{e.a[0]()}catch(e){a.error("Error calling 'dfp-targeting-done' callback",e)}})})}},{"../api/ads":21,"../api/ads/to-feature-segments-arr":26,"../lib/log":43,"../public-api":52}],"plugin:iabcmp":[function(e,t,n){"use strict";function r(){return"function"==typeof window.__tcfapi}function i(){return!r()&&"function"==typeof window.__cmp}function o(e,t){return new l(function(n,r){window.__cmp(e,t,function(t,i){i?n(t):r(new Error("Error calling __cmp:"+e))})})}function a(e,t){return new l(function(n,r){window.__tcfapi("addEventListener",2,function(i,o){o?"tcloaded"!==i.eventStatus&&"useractioncomplete"!==i.eventStatus||(window.__tcfapi("removeEventListener",2,function(){},i.listenerId),window.__tcfapi(e,2,n,t)):r(new Error("Error calling __tcfapi:"+e))},t)})}function s(e,t){return new l(function(n){window.__tcfapi(e,2,function(r){"tcloaded"===r.eventStatus||"useractioncomplete"===r.eventStatus?n(r):a(e,t).then(n)},t)})}function u(){return m.consents.tcStringV2?l.resolve(y(m.consents.tcStringV2)):m.consents.tcStringV1?l.resolve({core:h(m.consents.tcStringV1)}):b===!0?o("getConsentData",null).then(function(e){return{core:h(e.consentData)}}):w===!0?s("getTCData",[v]).then(function(e){return e.tcString?y(e.tcString):{}}):l.resolve({})}function c(e){return I.then(function(){return m.consents.tcStringV2?l.resolve(y(m.consents.tcStringV2)).then(function(t){if(!t)return!1;if(t.core.vendorConsents[v]!==!0)return!1;for(var n=0;n<e[2].length;n++)if(t.core.purposeConsents[e[2][n]]!==!0)return!1;return!0}):m.consents.tcStringV1?l.resolve(h(m.consents.tcStringV1)).then(function(t){if(t.allowedVendorIds.indexOf(v)===-1)return!1;for(var n=0;n<e[1].length;n++)if(t.allowedPurposeIds.indexOf(e[1][n])===-1)return!1;return!0}):b===!0?o("getVendorConsents",[v]).then(function(t){if(t.gdprApplies!==!0)return!0;if("undefined"==typeof t.vendorConsents[v])return!0;if(t.vendorConsents[v]!==!0)return!1;for(var n=0;n<e[1].length;n++)if(t.purposeConsents[e[1][n]]!==!0)return!1;return!0}):w===!0?s("getTCData",[v]).then(function(t){return u().then(function(n){var r=n.core&&n.core.publisherRestrictions&&n.core.publisherRestrictions[String(v)];return r?r.every(function(t){return!e[2]||!e[2].includes(t.purpose)||t.isAllowed&&(!t.isConsentRequired||n.publisherTC&&n.publisherTC.purposeConsents&&n.publisherTC.purposeConsents[t.purpose])&&(!t.isLegitimateInterestRequired||n.publisherTC&&n.publisherTC.purposeLegitimateInterests&&n.publisherTC.purposeLegitimateInterests[t.purpose])})&&t:t})}).then(function(t){if(!t)return!1;if(t.gdprApplies!==!0)return!0;if(!t.vendor||!t.purpose)return!0;if(t.vendor.consents[v]!==!0)return!1;for(var n=0;n<e[2].length;n++)if(t.purpose.consents[e[2][n]]!==!0)return!1;return!0}):l.resolve(!0)})}function f(){return I.then(function(){return m.consents.tcStringV2?l.resolve({gdpr_consent:m.consents.tcStringV2,gdpr:"1"}):m.consents.tcStringV1?l.resolve({iab_consent:m.consents.tcStringV1,iab_gdpr:"1"}):b===!0?o("getConsentData",null).then(function(e){return{iab_consent:e.core&&e.core.consentData||"",iab_gdpr:e.core&&e.core.gdprApplies?"yes":"no"}}):w===!0?s("getTCData",[v]).then(function(e){return{gdpr_consent:e.tcString||"",gdpr:e.gdprApplies?"1":"0"}}):l.resolve({})})}var d,l=e("@apr/promise-polyfill"),p=e("../lib/consent"),h=e("../lib/decodeConsentString"),g=e("../lib/log"),m=e("../config"),y=e("tc-string-parse"),v=394,w=r(),b=i(),I=new l(function(e){d=e});p.enable({acquire:c,getForwardParams:f,getConsentData:u,hasTTL:r}),t.exports=function(e){if(m.consents.tcStringV2?g.info("Using custom TCF 2.0 string"):m.consents.tcStringV1?g.info("Using custom TCF 1.1 string"):w?g.info("Using TCF 2.0 API from page"):b?g.info("Using TCF 1.1 API from page"):g.info("No TCF API found on page"),m.debug&&!b&&!w)var t=setInterval(function(){(r()||i())&&(clearInterval(t),g.error("TCF API loaded after SAK script is initialized"))},1e3);d(e.config.iabcmp)},t.exports.executeForSpiders=!0},{"../config":28,"../lib/consent":37,"../lib/decodeConsentString":38,"../lib/log":43,"@apr/promise-polyfill":5,"tc-string-parse":17}],"plugin:userreport-ak":[function(e,t,n){"use strict";function r(){var e={},t=/(?: |^)_usrp_lq=([^;]+)/.exec(document.cookie);t&&(e.lq_c=t[1]);var n=window.localStorage.getItem("_usrp_lq");return n&&(e.lq_ls=n),e}function i(){return f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(t){var n=t&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";l(y,s({t:a,d:v,rnd:p(),dsu:n,med:d().toString()},e,b,r())),I.forEach(function(t){l(y,s({t:t,d:v,rnd:p(),dsu:n,med:d().toString()},e,b,r()))})})})}var o,a,s=e("util-merge"),u=e("./userreport-core"),c=e("../lib/log"),f=e("../lib/consent"),d=e("../lib/location"),l=e("../lib/fire-pixel"),p=e("../lib/rnd"),h=e("@apr/dsu"),g=e("../api"),m=e("../config"),y=new f.DNTSelect("https://visitanalytics.userreport.com/hit","https://visitanalytics.dnt-userreport.com/hit"),v="",w={},b={},I=[];t.exports=function(e){var t=u.resolveCurrent(e),n=e.config["userreport-ak"].trackingConfig;if(e.isSpider&&(b={event:"bot"}),o=e.config["userreport-core"]&&e.config["userreport-core"].companyId,!t.mediaId)return o&&f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(t){var n=t&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";l(y,s({t:"USRur-core-nomedia",accountId:o,rnd:p(),dsu:n,med:d().toString()},e,b))})}),function(){};e.config["userreport-ak"].trackingConfig.forEach(function(e){"Section"===e.type&&e.mediaId===t.mediaId&&(w[e.sectionId]=e.trackingCode)});var r=n.filter(function(e){return"Media"===e.type&&e.mediaId===t.mediaId}).map(function(e){return e.trackingCode});return I=n.filter(function(e){return"Section"===e.type&&e.mediaId===t.mediaId&&t.sectionIds.indexOf(e.sectionId)!==-1}).map(function(e){return e.trackingCode}),0===r.length?(c.info("No media tracking matching"),null):r.length>1?(c.error("More than one media TP matching",r),null):(a=r[0],i().then(function(){return d.onLocationChange(function(){i()})}))},t.exports.executeForSpiders=!0,g.trackSectionPageView=function(e){if(!e)return void c.warn("Section ID is not passed");var t=w[e];return t?void f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(n){var i=n&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";l(y,s({t:t,d:v,rnd:p(),dsu:i,med:d().toString()},e,b,r()))})}):void c.warn("Section ID "+e+" does not belong to current media")},g.setMAID=function(e){v=e},g.trackPageview=function(e){var t=e||d().toString();f.getForwardParams().then(function(e){f.acquire({1:[f.IDENTIFY],2:[f.V2_USE_DEVICE]}).then(function(n){var i=n&&m.consents.storage&&!m.dnt?h.readOrCreateDsu(f.hasTTL()):"";a?l(y,s({t:a,d:v,rnd:p(),dsu:i,med:t},e,b,r())):l(y,s({t:"USRur-core-nomedia",accountId:o,rnd:p(),dsu:i,med:d().toString()},e,b))})})}},{"../api":20,"../config":28,"../lib/consent":37,"../lib/fire-pixel":39,"../lib/location":42,"../lib/log":43,"../lib/rnd":48,"./userreport-core":"plugin:userreport-core","@apr/dsu":1,"util-merge":18}],"plugin:userreport-core":[function(e,t,n){"use strict";function r(e){var t=v();return new RegExp(e).test(t.hostname+t.pathname)}function i(e,t){for(var n=window._urq||[],r=0;r<n.length;r++)if(n[r][0]===e&&n[r][1]===t)return!0;for(var i=window.audienceProjectLayer||[],o=0;o<i.length;o++)if(i[o][0]===e&&i[o][1]===t)return!0;return!1}function o(e){return!!i("setMediaId",e.id)&&(y.log("Media matched by _urq:",e.id),!0)}function a(e){return!!i("setSectionId",e.id)&&(y.log("Section matched by _urq:",e.id),!0)}function s(e,t){for(var n=window.document.getElementsByTagName("meta"),r=0;r<n.length;r++){var i=n[r].getAttribute("name"),o=n[r].getAttribute("value");if(i===e&&o===String(t))return!0}return!1}function u(e){return!!s("userreport:mediaId",e.id)&&(y.log("Media matched by meta:",e.id),!0)}function c(e){return!!s("userreport:sectionId",e.id)&&(y.log("Section matched by meta:",e.id),!0)}function f(e,t){if(!e.rules)return!1;for(var n=0;n<e.rules.length;n++){var r=e.rules[n],i=t[r.operation];if(i||y.error("Not supported rule",e.id,r.operation),i(r.pattern))return!0}return!1}function d(e){return!!f(e,C)&&(y.log("Media matched by rule:",e.id),!0)}function l(e){return!!f(e,A)&&(y.log("Section matched by rule:",e.id),!0)}function p(e){var t={companyId:null,mediaId:null,sectionIds:null},n=e.config["userreport-core"],r=n.networkLayout,i=r.filter(o);if(i.length||(i=r.filter(u)),i.length||(i=r.filter(d)),0===i.length)return y.error("Can’t resolve media"),t;if(i.length>1)return y.error("Resolved more than one media",i),t;var s=i[0],f=(s.sections||[]).filter(function(e){return a(e)||c(e)||l(e)});return t.companyId=n.companyId,t.mediaId=s.id,t.sectionIds=f.map(function(e){return e.id}),k=t.mediaId,y.info("Resolved media:",t.mediaId),y.info("Resolved sections:",t.sectionIds),t}function h(e){var t=e&&e.lastUpdated;if(!t)return!1;t.getTime&&(t=t.getTime());var n=6e4;return(new Date).getTime()-t<n}function g(e){var t=function(t){var n=t.data;if(n===R){var r={config:{mediaId:e.mediaId}};t.source.postMessage(JSON.stringify(r),t.origin)}};window.addEventListener("message",t,!1)}var m=e("../lib/consent"),y=e("../lib/log"),v=e("../lib/location"),w=e("../api"),b=e("../lib/add-script-tag"),I=e("../lib/check/domain"),E=e("../lib/check/section"),_=e("util-merge"),S=e("../config"),x="https://cdn.userreport.com/userreport.js",k=null,C={DomainEquals:I,StartsWith:function(e){var t=v(),n=t.hostname+t.pathname;return e.indexOf("?")!==-1&&(n+="?"+t.search),e.indexOf("#")!==-1&&(n+="#"+t.hash),0===n.indexOf(e)},Contains:function(e){return v().toString().indexOf(e)!==-1},RegEx:r},A={Section:E,Contains:function(e){return v().toString().indexOf(e)!==-1},StartsWith:function(e){var t=v(),n=t.pathname;return e.indexOf("?")!==-1&&(n+="?"+t.search),e.indexOf("#")!==-1&&(n+="#"+t.hash),0===n.indexOf(e)},UrlEquals:function(e){var t=v(),n=v.parse(e);if(n.host&&n.host!==n.hostname&&t.host!==n.host)return!1;if(n.hostname&&t.hostname!==n.hostname)return!1;if(n.pathname){var r="/"===n.pathname.slice(-1)[0]?n.pathname.slice(0,-1):n.pathname,i="/"===t.pathname.slice(-1)[0]?t.pathname.slice(0,-1):t.pathname;if(r!==i)return!1}return(!n.search||t.search===n.search)&&(!n.hash||t.hash===n.hash)},RegExp:r,RegEx:r,PathEquals:function(e){return v().pathname===e}},R="getSiteConfig";t.exports=function(e){return m.acquire({1:[m.IDENTIFY],2:[m.V2_USE_DEVICE,m.V2_MEASURE_PERFORMANCE_CONTENT]}).then(function(t){if(t===!1)return null;if(window.location.href.indexOf("__urp=suppress")!==-1)try{y.info("Invitation suppressed forever"),window.localStorage.setItem("_usrp_lq","20300101")}catch(e){}window._urq=window._urq||[],m.getForwardParams().then(function(e){(e.gdpr||e.gdpr_consent)&&(window._urq.push(["setGDPR",e.gdpr?"1":"0"]),window._urq.push(["setGDPRConsent",e.gdpr_consent]))}),S.dnt&&window._urq.push(["forwardAnonymousTracking",S.dnt]),S.consents.storage||window._urq.push(["forwardConsents",S.consents]);var n=p(e);if(g(n),n.mediaId){m.getConsentData().then(function(e){e.core&&h(e.core)&&(window._urq.push(["inhibitInvitation",!0]),setTimeout(function(){window._urq.push(["tryToInvite"])},6e4))}),window._urq.push(["initSite",n.mediaId]),y.info("Initalizing UserReport for media:",n.mediaId);var r=e.config["userreport-invitation-utils"]&&e.config["userreport-invitation-utils"].optimizeScriptLoading===!0;r||b(x,{id:"userreport-script"})}else{var i=/__(bpn|urp)=test_invite/i.test(window.location.href);i&&alert("Unable to identify media, domain is not configured or dublicated Media created. ")}return null})},t.exports.resolveCurrent=p,t.exports.checkAdsDomain=function(e){var t=p(e);return!!t&&null!==t.mediaId},w.embedSurvey=function(e,t){if("string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e)throw new Error("Unable to find passed container");var n={ignoreLocalQuarantine:!1,mediaId:k,surveyUrl:"https://sak.userreport.com/_rt/vs/survey",onDoneCallback:function(){},customizations:{invitation:{headline:null,accept:null,decline:null},thankYou:{headline:null,close:null,powered:null},disabledQuestions:[]}};if(t=_({},n,t),!t.mediaId)throw new Error("Media is not defined. You need to pass mediaId in options or setup media matching rules");var r={};t.customizations.invitation&&(r.invitation={},t.customizations.invitation.headline&&(r.invitation.headline=t.customizations.invitation.headline),t.customizations.invitation.accept&&(r.invitation.accept=t.customizations.invitation.accept),t.customizations.invitation.decline&&(r.invitation.decline=t.customizations.invitation.decline)),t.customizations.thankYou&&(r.thankYou={},t.customizations.thankYou.headline&&(r.thankYou.headline=t.customizations.thankYou.headline),t.customizations.thankYou.close&&(r.thankYou.close=t.customizations.thankYou.close),t.customizations.thankYou.built&&(r.thankYou.built=t.customizations.thankYou.built)),t.customizations.disabledQuestions&&t.customizations.disabledQuestions.length>0&&(r.questionOverrides={},t.customizations.disabledQuestions.forEach(function(e){r.questionOverrides["q"+e]=null,23===e&&(r.questionOverrides.q100103=null,r.questionOverrides.q100104=null)}));var i=document.createElement("iframe");for(i.style.width="100%",i.style.height="100%",i.src=t.surveyUrl+"?mid="+t.mediaId+"#localization="+encodeURIComponent(JSON.stringify(r)),i.frameborder="no",i.style.border="none 0";e.firstChild;)e.removeChild(e.lastChild);e.appendChild(i),window.addEventListener("message",function(e){"userreport.surveyEnded"===e.data.name&&t.onDoneCallback&&t.onDoneCallback()})},w.setMediaId=function(){return null},w.setSectionId=function(){return null}},{"../api":20,"../config":28,"../lib/add-script-tag":32,"../lib/check/domain":35,"../lib/check/section":36,"../lib/consent":37,"../lib/location":42,"../lib/log":43,"util-merge":18}],"plugin:userreport-invitation-utils":[function(e,t,n){"use strict";function r(e){var t=e||new Date;return Number(t.toISOString().split("T")[0].split("-").join(""))}function i(e){return 0+e>r(new Date)}function o(e){var t=null,n=window.localStorage.getItem(E);if("string"==typeof n)try{t=JSON.parse(n)}catch(e){}if(null===t)h.info("Starting user tracking"),t={lastVisitTime:Date.now(),sessionsCount:1,sessionPageviewsCount:1,totalPageviewsCount:1};else{h.info("Last time visited at %s",new Date(t.lastVisitTime));var r=Date.now()-t.lastVisitTime>e;r?(t.sessionsCount+=1,t.sessionPageviewsCount=1,h.info("New session %d started",t.sessionsCount)):(t.sessionPageviewsCount+=1,h.info("Visited %d times in this session",t.sessionPageviewsCount)),t.totalPageviewsCount+=1,h.info("Visited %d times in total",t.totalPageviewsCount),t.lastVisitTime=Date.now()}try{return b.consents.storage&&!b.dnt&&window.localStorage.setItem(E,JSON.stringify(t)),t}catch(e){return null}}function a(e,t,n){var r=t.getBoundingClientRect(),i=!(r.top||r.right||r.bottom||r.left||r.width||r.height);if(i)return null;var o=window.getComputedStyle(t),s="hidden"===o.getPropertyValue("visibility");if(s)return null;if("fixed"===o.getPropertyValue("position")){var u=r.width*r.height;return u>=e?t:null}if(n>=_)return null;var c=t.children;if(c.length>S)return null;for(var f=0;f<c.length;f++){var d=a(e,c[f],n+1);if(null!==d)return d}return null}function s(e){var t=1e3*(e.timeout||30),n=e.areaPercentage||50;return new l(function(e){setTimeout(e,t)}).then(function(){for(var e=window.innerWidth*window.innerHeight,t=e*(n/100),r=document.body.children,i=0;i<r.length;i++){var o=a(t,r[i],0);if(null!==o)return o}return null})}function u(e){var t=window._urq=window._urq||[];t.unshift?t.unshift(e):h.warn("Userreport already started")}function c(e){var t=window._urq=window._urq||[];t.push(e)}function f(e){var t=e.config["userreport-invitation-utils"],n={};for(var r in t)"domainSpecific"!==r&&t.hasOwnProperty(r)&&(n[r]=t[r]);var i=g(),o=t.domainSpecific&&t.domainSpecific[i.hostname];if(o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a]);return n}function d(){P||(A&&R?(P=!0,p.acquire({1:[p.IDENTIFY],2:[p.V2_USE_DEVICE,p.V2_MEASURE_PERFORMANCE_CONTENT]}).then(function(e){return e===!1?null:(window._urq=window._urq||[],p.getForwardParams().then(function(e){(e.gdpr||e.gdpr_consent)&&(window._urq.push(["setGDPR",e.gdpr?"1":"0"]),window._urq.push(["setGDPRConsent",e.gdpr_consent]))}),b.dnt&&window._urq.push(["forwardAnonymousTracking",b.dnt]),b.consents.storage||window._urq.push(["forwardConsents",b.consents]),y(x,{id:"userreport-script"}))})):h.info("UserReport script not loaded.",JSON.stringify({canBeInvited:A,mayBeInvited:R})))}var l=e("@apr/promise-polyfill"),p=e("../lib/consent"),h=e("../lib/log"),g=e("../lib/location"),m=e("../api"),y=e("../lib/add-script-tag"),v=e("../lib/fire-pixel"),w=e("@apr/dsu"),b=e("../config"),I=144e5,E="_usrp_tracker",_=4,S=10,x="https://cdn.userreport.com/userreport.js",k=new p.DNTSelect("https://visitanalytics.userreport.com/hit","https://visitanalytics.dnt-userreport.com/hit"),C="",A=!0,R=!0,P=!1,T=null;t.exports=function(e){T=e.sakConfig?e.sakConfig.customerId:null;var t=f(e);h.info("UserReport utils config:",t),t.integrateWithGTM===!0&&u(["integrateWithGTM",void 0,["SecondsOnPage"]]),t.suppressCookieSync&&u(["suppressCookieSync"]),t.requirePolicyAcceptance&&(h.info("Requiring policy acceptance"),u(["setPrivacyPolicyChecked",!1])),t.customTranslations&&(h.info("Applying custom translation"),Object.keys(t.customTranslations).forEach(function(e){var n=t.customTranslations[e];u(["setCustomTranslation",e,n])}));var n=function(){R=!1,h.info("Postponing invitation"),u(["inhibitInvitation",!0])},r=function(){R=!0,h.info("Trying to invite to UserReport"),c(["tryToInvite"]),d()};t.muteByDefault&&n();var a=t.sessionTimeout||I,l=t.inviteOnSession||1,p=t.inviteOnSessionPageview||1,g=1!==l||1!==p?o(a):null,m=null===g||g.sessionsCount>=l&&g.sessionPageviewsCount>=p;m===!1?n():t.popupDetection&&(n(),s(t.popupDetection).then(function(e){if(null!==e)h.info("Another popup element detected");else if(t.popupDetection.pushdownElement){var n=document.querySelector(t.popupDetection.pushdownElement);n?!function e(){window.scrollY>=n.clientHeight?(h.info("Pusdown element not on screen."),r()):(h.info("Pusdown element is still on screen"),setTimeout(e,1e3))}():(h.info("Pusdown element not found"),r())}else r()}));var y=window.localStorage.getItem("_usrp_lq");i(y)&&(h.info("User in LocalStorage local quarantine"),A=!1,C+="l");var v=/(?: |^)_usrp_lq=([^;]+)/.exec(document.cookie);if(v){var w=v[1];i(w)&&(h.info("User in Cookie local quarantine"),A=!1,C+="c")}b.consents.storage&&!b.dnt||(A=!1),window.location.href.indexOf("__urp=test_invite")!==-1&&(A=!0,R=!0),d()},m.attemptToInvite=function(e){R=!0,h.info("[API] attemptToInvite"),c(["tryToInvite",e]),d();var t=b.consents.storage&&!b.dnt?w.readOrCreateDsu(p.hasTTL()):"",n="USR"+T+"-invattempt-"+(A?"y":"n");v(k,{t:n,dsu:t,med:g().toString(),canBeInvited:A,qi:C})}},{"../api":20,"../config":28,"../lib/add-script-tag":32,"../lib/consent":37,"../lib/fire-pixel":39,"../lib/location":42,"../lib/log":43,"@apr/dsu":1,"@apr/promise-polyfill":5}]},{},[50])}();